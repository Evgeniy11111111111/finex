"use strict";

var burgerBtn = document.querySelector(".header__burger");
var menuBurger = document.querySelector(".header__menu");
var headerSvg = document.querySelector(".header__svg");
burgerBtn.addEventListener("click", function () {
  menuBurger.classList.toggle('active');
  burgerBtn.classList.toggle("active");
  document.body.classList.toggle("lock");

  if (menuBurger.classList.contains("active")) {
    setTimeout(function () {
      headerSvg.classList.add("active");
    }, 200);
  } else {
    headerSvg.classList.remove("active");
  }
});

if (window.innerWidth < 992) {
  var menuItemLink = document.querySelectorAll(".header__item-link");
  menuItemLink.forEach(function (elem) {
    elem.addEventListener("click", function (e) {
      e.preventDefault();
      elem.style.transform = "translateX(".concat(elem.parentElement.clientWidth / 2 - elem.clientWidth / 2, "px)");
      elem.parentElement.classList.add("active");
      document.body.classList.remove("lock");
      setTimeout(function () {
        window.location.href = elem.getAttribute("href");
        menuBurger.classList.remove('active');
        burgerBtn.classList.remove('active');
        headerSvg.classList.remove('active');
      }, 500);
      setTimeout(function () {
        elem.style.transform = "translateX(0)";
        elem.parentElement.classList.remove("active");
      }, 1000);
    });
  });
}

var form = document.querySelector(".contacts__form");
var successMessage = document.querySelector(".contacts__success");
form.addEventListener("submit", function (e) {
  e.preventDefault();
  successMessage.classList.add("active");
});
var inputTel = document.querySelectorAll(".contacts__input");
inputTel.forEach(function (elem) {
  if (elem.type === "tel") {
    elem.addEventListener("input", function (e) {
      inputPhone(e);
    });
    elem.addEventListener("keydown", function (e) {
      onePhoneKeyDown(e);
    });
  }
});

function regPhone(input) {
  return input.value.replace(/\D/g, '');
}

function inputPhone(e) {
  var input = e.target;
  var inputNumberValue = regPhone(input);
  var formattedInputValue = '';
  var selectionStart = input.selectionStart; // Если в инпут введены симовлы не соответсвующие регулярки, то значение инпута становится пустым

  if (!inputNumberValue) return input.value = ''; // В этой части я не совсем понимаю что происходит

  if (input.value.length != selectionStart) {
    if (e.data && /\D/g.test(e.data)) {
      input.value = inputNumberValue;
    }

    return;
  }

  if (['7', '8', '9'].includes(inputNumberValue[0])) {
    // Если первая цифра девять, тогда мы заменяем первую цифру на 7 и девятку делаем второй цифрой
    if (inputNumberValue[0] == '9') inputNumberValue = '7' + inputNumberValue;
    if (inputNumberValue[0] == '8') inputNumberValue = '7'; // Если первая цифра 7, тогда значение инпута начинается с +7, если первая цифра 8, тогда значение начинается с 8

    var firstSymbol = '+7';
    formattedInputValue = firstSymbol + ' '; // Если в инпуте больше одной цифры добавляем скобку открытия и так далее

    if (inputNumberValue.length > 1) {
      formattedInputValue += '(' + inputNumberValue.substring(1, 4);
    }

    if (inputNumberValue.length >= 5) {
      formattedInputValue += ') ' + inputNumberValue.substring(4, 7);
    }

    if (inputNumberValue.length >= 8) {
      formattedInputValue += '-' + inputNumberValue.substring(7, 9);
    }

    if (inputNumberValue.length >= 10) {
      formattedInputValue += '-' + inputNumberValue.substring(9, 11);
    }
  } else {
    //Если вводимое число не 7, 8 или 9 тогда добавляем +и добавляем введеное число
    formattedInputValue = '+7 (9' + inputNumberValue;
  }

  input.value = formattedInputValue;
}

function onePhoneKeyDown(e) {
  var input = e.target;

  if (regPhone(input).length == 1 && e.keyCode === 8) {
    input.value = '';
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYnVyZ2VyQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVudUJ1cmdlciIsImhlYWRlclN2ZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJib2R5IiwiY29udGFpbnMiLCJzZXRUaW1lb3V0IiwiYWRkIiwicmVtb3ZlIiwid2luZG93IiwiaW5uZXJXaWR0aCIsIm1lbnVJdGVtTGluayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0eWxlIiwidHJhbnNmb3JtIiwicGFyZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwibG9jYXRpb24iLCJocmVmIiwiZ2V0QXR0cmlidXRlIiwiZm9ybSIsInN1Y2Nlc3NNZXNzYWdlIiwiaW5wdXRUZWwiLCJ0eXBlIiwiaW5wdXRQaG9uZSIsIm9uZVBob25lS2V5RG93biIsInJlZ1Bob25lIiwiaW5wdXQiLCJ2YWx1ZSIsInJlcGxhY2UiLCJ0YXJnZXQiLCJpbnB1dE51bWJlclZhbHVlIiwiZm9ybWF0dGVkSW5wdXRWYWx1ZSIsInNlbGVjdGlvblN0YXJ0IiwibGVuZ3RoIiwiZGF0YSIsInRlc3QiLCJpbmNsdWRlcyIsImZpcnN0U3ltYm9sIiwic3Vic3RyaW5nIiwia2V5Q29kZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxTQUFTLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixpQkFBdkIsQ0FBbEI7QUFDQSxJQUFNQyxVQUFVLEdBQUdGLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixlQUF2QixDQUFuQjtBQUNBLElBQU1FLFNBQVMsR0FBR0gsUUFBUSxDQUFDQyxhQUFULENBQXVCLGNBQXZCLENBQWxCO0FBR0FGLFNBQVMsQ0FBQ0ssZ0JBQVYsQ0FBMkIsT0FBM0IsRUFBb0MsWUFBTTtFQUN0Q0YsVUFBVSxDQUFDRyxTQUFYLENBQXFCQyxNQUFyQixDQUE0QixRQUE1QjtFQUNB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QUNKIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBidXJnZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fYnVyZ2VyXCIpIFxuY29uc3QgbWVudUJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19tZW51XCIpXG5jb25zdCBoZWFkZXJTdmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fc3ZnXCIpXG5cblxuYnVyZ2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgbWVudUJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKVxuICAgIGJ1cmdlckJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwibG9ja1wiKVxuICAgIGlmIChtZW51QnVyZ2VyLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PiB7XG4gICAgICAgICAgICBoZWFkZXJTdmcuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuXG4gICAgICAgIH0sIDIwMClcbiAgICB9IGVsc2Uge1xuICAgICAgICBoZWFkZXJTdmcuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgIH1cbn0pXG5pZiAod2luZG93LmlubmVyV2lkdGggPCA5OTIpIHtcbiAgICBjb25zdCBtZW51SXRlbUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlYWRlcl9faXRlbS1saW5rXCIpXG4gICAgbWVudUl0ZW1MaW5rLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIGVsZW0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtlbGVtLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGgvMiAtIGVsZW0uY2xpZW50V2lkdGggLyAyfXB4KWBcbiAgICAgICAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJsb2NrXCIpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGVsZW0uZ2V0QXR0cmlidXRlKFwiaHJlZlwiKVxuICAgICAgICAgICAgICAgIG1lbnVCdXJnZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgICAgICBidXJnZXJCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgICAgICBoZWFkZXJTdmcuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgIH0sIDUwMClcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKDApXCJcbiAgICAgICAgICAgICAgICBlbGVtLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfSwgMTAwMClcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5cbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhY3RzX19mb3JtXCIpXG5jb25zdCBzdWNjZXNzTWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFjdHNfX3N1Y2Nlc3NcIilcbmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHN1Y2Nlc3NNZXNzYWdlLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbn0pXG5cbmNvbnN0IGlucHV0VGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWN0c19faW5wdXRcIilcbmlucHV0VGVsLmZvckVhY2goZWxlbSA9PiB7XG4gICAgaWYgKGVsZW0udHlwZSA9PT0gXCJ0ZWxcIikge1xuICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge2lucHV0UGhvbmUoZSl9KVxuICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7b25lUGhvbmVLZXlEb3duKGUpfSlcbiAgICB9XG59KVxuXG5mdW5jdGlvbiByZWdQaG9uZShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dC52YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpO1xufVxuXG5mdW5jdGlvbiBpbnB1dFBob25lKGUpIHtcbiAgICBsZXQgaW5wdXQgPSBlLnRhcmdldDtcbiAgICBsZXQgaW5wdXROdW1iZXJWYWx1ZSA9IHJlZ1Bob25lKGlucHV0KTtcbiAgICBsZXQgZm9ybWF0dGVkSW5wdXRWYWx1ZSA9ICcnO1xuICAgIGxldCBzZWxlY3Rpb25TdGFydCA9IGlucHV0LnNlbGVjdGlvblN0YXJ0XG4gICAgLy8g0JXRgdC70Lgg0LIg0LjQvdC/0YPRgiDQstCy0LXQtNC10L3RiyDRgdC40LzQvtCy0LvRiyDQvdC1INGB0L7QvtGC0LLQtdGC0YHQstGD0Y7RidC40LUg0YDQtdCz0YPQu9GP0YDQutC4LCDRgtC+INC30L3QsNGH0LXQvdC40LUg0LjQvdC/0YPRgtCwINGB0YLQsNC90L7QstC40YLRgdGPINC/0YPRgdGC0YvQvFxuICAgIGlmICghaW5wdXROdW1iZXJWYWx1ZSkgcmV0dXJuIGlucHV0LnZhbHVlID0gJydcbiAgICAvLyDQkiDRjdGC0L7QuSDRh9Cw0YHRgtC4INGPINC90LUg0YHQvtCy0YHQtdC8INC/0L7QvdC40LzQsNGOINGH0YLQviDQv9GA0L7QuNGB0YXQvtC00LjRglxuICAgIGlmIChpbnB1dC52YWx1ZS5sZW5ndGggIT0gc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgICAgaWYgKGUuZGF0YSAmJiAvXFxEL2cudGVzdChlLmRhdGEpKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGlucHV0TnVtYmVyVmFsdWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoWyc3JywgJzgnLCAnOSddLmluY2x1ZGVzKGlucHV0TnVtYmVyVmFsdWVbMF0pKSB7XG4gICAgICAgIC8vINCV0YHQu9C4INC/0LXRgNCy0LDRjyDRhtC40YTRgNCwINC00LXQstGP0YLRjCwg0YLQvtCz0LTQsCDQvNGLINC30LDQvNC10L3Rj9C10Lwg0L/QtdGA0LLRg9GOINGG0LjRhNGA0YMg0L3QsCA3INC4INC00LXQstGP0YLQutGDINC00LXQu9Cw0LXQvCDQstGC0L7RgNC+0Lkg0YbQuNGE0YDQvtC5XG4gICAgICAgIGlmIChpbnB1dE51bWJlclZhbHVlWzBdID09ICc5JykgaW5wdXROdW1iZXJWYWx1ZSA9ICc3JyArIGlucHV0TnVtYmVyVmFsdWU7XG4gICAgICAgIGlmIChpbnB1dE51bWJlclZhbHVlWzBdID09ICc4JykgaW5wdXROdW1iZXJWYWx1ZSA9ICc3J1xuICAgICAgICAvLyDQldGB0LvQuCDQv9C10YDQstCw0Y8g0YbQuNGE0YDQsCA3LCDRgtC+0LPQtNCwINC30L3QsNGH0LXQvdC40LUg0LjQvdC/0YPRgtCwINC90LDRh9C40L3QsNC10YLRgdGPINGBICs3LCDQtdGB0LvQuCDQv9C10YDQstCw0Y8g0YbQuNGE0YDQsCA4LCDRgtC+0LPQtNCwINC30L3QsNGH0LXQvdC40LUg0L3QsNGH0LjQvdCw0LXRgtGB0Y8g0YEgOFxuICAgICAgICBsZXQgZmlyc3RTeW1ib2wgPSAnKzcnO1xuICAgICAgICBmb3JtYXR0ZWRJbnB1dFZhbHVlID0gZmlyc3RTeW1ib2wgKyAnICc7XG4gICAgICAgIC8vINCV0YHQu9C4INCyINC40L3Qv9GD0YLQtSDQsdC+0LvRjNGI0LUg0L7QtNC90L7QuSDRhtC40YTRgNGLINC00L7QsdCw0LLQu9GP0LXQvCDRgdC60L7QsdC60YMg0L7RgtC60YDRi9GC0LjRjyDQuCDRgtCw0Log0LTQsNC70LXQtVxuICAgICAgICBpZiAoaW5wdXROdW1iZXJWYWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRJbnB1dFZhbHVlICs9ICcoJyArIGlucHV0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKDEsIDQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0TnVtYmVyVmFsdWUubGVuZ3RoID49IDUpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZElucHV0VmFsdWUgKz0gJykgJyArIGlucHV0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKDQsIDcpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0TnVtYmVyVmFsdWUubGVuZ3RoID49IDgpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZElucHV0VmFsdWUgKz0gJy0nICsgaW5wdXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcoNywgOSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXROdW1iZXJWYWx1ZS5sZW5ndGggPj0gMTApIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZElucHV0VmFsdWUgKz0gJy0nICsgaW5wdXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcoOSwgMTEpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHsgLy/QldGB0LvQuCDQstCy0L7QtNC40LzQvtC1INGH0LjRgdC70L4g0L3QtSA3LCA4INC40LvQuCA5INGC0L7Qs9C00LAg0LTQvtCx0LDQstC70Y/QtdC8ICvQuCDQtNC+0LHQsNCy0LvRj9C10Lwg0LLQstC10LTQtdC90L7QtSDRh9C40YHQu9C+XG4gICAgICAgIGZvcm1hdHRlZElucHV0VmFsdWUgPSAnKzcgKDknICsgaW5wdXROdW1iZXJWYWx1ZTtcbiAgICB9XG4gICAgaW5wdXQudmFsdWUgPSBmb3JtYXR0ZWRJbnB1dFZhbHVlXG59XG5cbmZ1bmN0aW9uIG9uZVBob25lS2V5RG93biAoZSkge1xuICAgIGxldCBpbnB1dCA9IGUudGFyZ2V0O1xuICAgIGlmIChyZWdQaG9uZShpbnB1dCkubGVuZ3RoID09IDEgJiYgZS5rZXlDb2RlID09PSA4KSB7XG4gICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgfVxufSJdfQ==
